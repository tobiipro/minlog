{"version":3,"sources":["../src/util.ts"],"names":[],"mappings":"0IAAA,2E;;;;;;AAMO,IAAI,qBAAqB,GAAG,UAAS,IAAT,EAAuB,KAAvB,EAA4C;AAC7E,MAAI,yBAAE,UAAF,YAAa,KAAb,4CAAa,QAAO,MAApB,CAAJ,EAAiC;AAC/B,WAAO,KAAP;AACD;;AAED;AACE,2BAAE,OAAF,CAAU,KAAV;AACA,2BAAE,SAAF,CAAY,KAAZ,CADA;AAEA,2BAAE,KAAF,CAAQ,KAAR,CAFA;AAGA,2BAAE,QAAF,CAAW,KAAX,CAHA;AAIA,2BAAE,aAAF,CAAgB,KAAhB,CAJA;AAKA,2BAAE,QAAF,CAAW,KAAX,CALA;AAMA,2BAAE,QAAF,CAAW,KAAX,CAPF;AAQE;AACA,WAAO,KAAP;AACD;;AAED;AACA,EAAA,KAAK,GAAG,OAAO,CAAC,MAAD,CAAP,CAAgB,OAAhB,CAAwB,KAAxB,CAAR;AACA,EAAA,KAAK,GAAG,yBAAE,KAAF,CAAQ,KAAR,EAAe,IAAf,CAAR;AACA,MAAI,KAAK,CAAC,MAAN,GAAe,CAAnB,EAAsB;AACpB,IAAA,KAAK,GAAG,KAAK,CAAC,CAAD,CAAb;AACD;AACD,SAAO,KAAP;AACD,CAxBM,C;;AA0BA,IAAI,aAAa,GAAG,UAAgC,QAAhC,EAAyD;AAClF,MAAI,aAAa,GAAG,yBAAE,MAAF,CAAS,QAAT,EAAmB,UAAS,MAAT,EAAiB,GAAjB,EAAsB;AAC3D,QAAI,yBAAE,QAAF,CAAW;AACb,SADa;AAEb,SAFa,CAAX;AAGD,IAAA,GAHC,CAAJ,EAGS;AACP,aAAO,KAAP;AACD;AACD,QAAI,yBAAE,UAAF,CAAa,GAAb,EAAkB,GAAlB,CAAJ,EAA4B;AAC1B,aAAO,KAAP;AACD;AACD,WAAO,IAAP;AACD,GAXmB,CAApB;;AAaA,SAAO,aAAP;AACD,CAfM,C","file":"util.js","sourcesContent":["import _ from 'lodash-firecloud';\n\nimport {\n  MinLogEntry\n} from './types';\n\nexport let jsonStringifyReplacer = function(_key: string, value: any): unknown {\n  if (_.isFunction(value?.toJSON)) {\n    return value;\n  }\n\n  if (\n    _.isArray(value) ||\n    _.isBoolean(value) ||\n    _.isNil(value) ||\n    _.isNumber(value) ||\n    _.isPlainObject(value) ||\n    _.isString(value) ||\n    _.isSymbol(value)\n  ) {\n    return value;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-require-imports\n  value = require('util').inspect(value);\n  value = _.split(value, '\\n');\n  if (value.length < 2) {\n    value = value[0];\n  }\n  return value;\n};\n\nexport let keepOnlyExtra = function<T extends MinLogEntry>(logEntry: T): Partial<T> {\n  let extraLogEntry = _.pickBy(logEntry, function(_value, key) {\n    if (_.includes([\n      'ctx',\n      'msg'\n    ], key)) {\n      return false;\n    }\n    if (_.startsWith(key, '_')) {\n      return false;\n    }\n    return true;\n  });\n\n  return extraLogEntry;\n};\n"]}